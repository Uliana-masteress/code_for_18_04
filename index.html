<!DOCTYPE html>
<html>
<head>
    <title>Онлайн магазин</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Подключаем Telegram Web App API -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* Стили для карточек и меню */
        .product-card { margin: 10px; padding: 10px; border: 1px solid #ddd; }
        .size-btn { margin: 5px; padding: 8px; }
        .selected { background: blue; color: white; }
    </style>
</head>
<body>
    <div id="app"></div>
    <script>
        // Данные товаров
        const products = {
            'shorts': [
                { id: 1, name: 'Шорты спортивные', price: 1500, 
                  photos: ['photo1.jpg', 'photo2.jpg'], 
                  desc: 'Описание...', sizes: ['S', 'M', 'L'] },
                { id: 2, name: 'Шорты летние', price: 1200, 
                  photos: ['photo3.jpg'], 
                  desc: 'Состав: хлопок 100%', sizes: ['M', 'XL'] }
            ],
            'tshirts': [/* аналогично */],
            'hoodies': [/* аналогично */]
        };

        // Корзина (используем localStorage)
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        // Рендер главного меню
        function renderMainMenu() {
            const html = `
                <h2>Добро пожаловать!</h2>
                <button onclick="renderCategory('shorts')">Шорты</button>
                <button onclick="renderCategory('tshirts')">Футболки</button>
                <button onclick="renderCategory('hoodies')">Худи</button>
                <button onclick="renderCart()">Корзина (${cart.length})</button>
            `;
            document.getElementById('app').innerHTML = html;
        }

        // Рендер категории товаров
        function renderCategory(category) {
            const items = products[category].map(item => `
                <div class="product-card">
                    <img src="${item.photos[0]}" width="200">
                    <h3>${item.name}</h3>
                    <p>Цена: ${item.price} руб.</p>
                    <button onclick="renderProduct('${category}', ${item.id})">Выбрать</button>
                </div>
            `).join('');
            document.getElementById('app').innerHTML = `<button onclick="renderMainMenu()">Назад</button>${items}`;
        }

        // Рендер корзины
        function renderCart() {
            const items = cart.map(item => `
                <div class="product-card">
                    <h3>${item.name}</h3>
                    <p>Размер: ${item.size}</p>
                    <p>Цена: ${item.price} руб.</p>
                </div>
            `).join('');
            const total = cart.reduce((sum, item) => sum + item.price, 0);
            const html = `
                <button onclick="renderMainMenu()">Назад</button>
                ${items}
                <h3>Итого: ${total} руб.</h3>
                <button onclick="checkout()">Оплатить</button>
            `;
            document.getElementById('app').innerHTML = html;
        }

        // Обработка оплаты
        function checkout() {
            const message = `Ваш заказ:\n${cart.map(item => `- ${item.name} (${item.size}): ${item.price} руб.`).join('\n')}`;
            Telegram.WebApp.openTelegramLink(`https://t.me/your_bot_username?start=${encodeURIComponent(message)}`);
        }

        // Инициализация
        Telegram.WebApp.ready();
        renderMainMenu();
    </script>
</body>
</html>